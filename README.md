# 交互式多重分形系统浏览器 (RX-0) - 用户手册

## 1. 系统简介

“交互式多重分形系统浏览器 (RX-0)”是一个基于Web的动态可视化工具，旨在帮助用户探索和理解基于**二八定律（帕累托法则）**、**幂律分布**和**多重分形**思想构建的复杂层级系统。

系统通过递归生成一个具有自相似性的层级结构，其中每个节点在不同尺度下可以分裂为“有效”和“无效”两部分。这些分裂的比例和效应贡献权重可以根据用户定义的参数动态调整，从而模拟出高度不均衡且具有多重标度特性的复杂系统。

用户可以通过图形用户界面（GUI）调整系统生成参数，选择不同的可视化方式（旭日图、矩形树图），观察系统对参数变化的响应（演化），并与图表交互以查看特定节点的详细信息。

**核心特性：**

*   **参数化生成**：灵活控制系统结构和属性分布。
*   **多重分形模拟**：不同层级和分支的标度行为可变。
*   **动态演化**：观察参数扰动对系统的影响。
*   **多种可视化**：旭日图和矩形树图，按体积或效应展示。
*   **交互式探索**：点击节点查看详细属性和子节点。
*   **实时反馈**：滑块调整参数时，其值实时显示。

## 2. 系统界面概览

系统界面主要分为两部分：

*   **左侧：控制面板** - 用于调整系统生成参数、选择可视化类型和控制系统行为。
*   **右侧：显示区域** - 用于展示生成系统的可视化图表、系统摘要统计以及被点击节点的详细信息。

([![image](https://github.com/user-attachments/assets/d56a613f-33f4-4a40-bb60-ed3b4d38f717](https://github.com/SAY683/RX-0/blob/main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-05-19%20091939.png))
)

### 2.1 控制面板

控制面板包含以下主要控件：

*   **系统参数标题**
    *   **最大深度 (Max Depth)**:
        *   **控件类型**: 滑块
        *   **功能**: 控制分形递归的最大层数。
        *   **提示**: 深度超过4时，节点数量急剧增加，可能导致浏览器响应缓慢。
    *   **基础'有效'体积比例 (%) (`p_eff_base`)**:
        *   **控件类型**: 滑块
        *   **功能**: 初始时，“有效”部分占其父节点体积的百分比。
    *   **'有效'分支体积集中因子 (`eff_vol_conc_factor`)**:
        *   **控件类型**: 滑块
        *   **功能**: 沿“有效”分支深入时，其内部“有效”子部分体积比例额外减小的程度 (每层级乘以预设的敏感度因子，如0.01)。值越大越集中。
    *   **'无效'分支体积扩散因子 (`ineff_vol_spread_factor`)**:
        *   **控件类型**: 滑块
        *   **功能**: 沿“无效”分支深入时，其内部“有效”子部分体积比例额外增大的程度 (每层级乘以预设的敏感度因子)。值越大越分散(相对)。
    *   **基础'有效'效应权重 (%) (`w_eff_base`)**:
        *   **控件类型**: 滑块
        *   **功能**: 初始时，“有效”部分贡献其父节点效应的百分比。
    *   **'有效'分支效应集中因子 (`eff_effect_conc_factor`)**:
        *   **控件类型**: 滑块
        *   **功能**: 沿“有效”分支深入时，其内部“有效”子部分效应贡献额外增大的程度 (每层级乘以预设的敏感度因子)。值越大效应越集中。
    *   **'无效'分支效应抑制因子 (`ineff_effect_damp_factor`)**:
        *   **控件类型**: 滑块
        *   **功能**: 沿“无效”分支深入时，其内部“有效”子部分效应贡献额外减小的程度 (每层级乘以预设的敏感度因子)。值越大抑制越强。
    *   **随机性因子 (%) (`rand_factor`)**:
        *   **控件类型**: 滑块
        *   **功能**: 为比例和权重计算增加随机扰动的最大幅度（占自身值的百分比）。
    *   **演化扰动幅度 (%) (`evolve_perturb_factor`)**:
        *   **控件类型**: 滑块
        *   **功能**: 点击“演化系统”时，各参数（除自身外）随机变化的最大百分比（相对于参数自身的可调范围）。
*   **可视化类型**:
    *   **控件类型**: 下拉菜单
    *   **选项**:
        *   旭日图 (按体积)
        *   旭日图 (按效应)
        *   矩形树图 (按体积)
        *   矩形树图 (按效应)
    *   **功能**: 选择展示系统结构的可视化方式和依据的属性。
*   **控制按钮**:
    *   **重新生成**: 使用当前所有参数设置重新生成整个系统。
    *   **演化系统**: 对当前参数（除“演化扰动幅度”外）进行一次随机扰动（扰动幅度受“演化扰动幅度”参数控制），然后重新生成系统。时间步加1。
    *   **重置演化**: 将所有参数恢复到其初始默认值，并将时间步重置为0，然后重新生成系统。
*   **时间步显示**:
    *   **功能**: 显示当前演化的时间步数。

### 2.2 显示区域

*   **可视化图表 (`fractal-viz`)**:
    *   **功能**: 以选定的图表类型（旭日图或矩形树图）展示当前生成系统的结构。
    *   **交互**:
        *   **悬停 (Hover)**: 鼠标悬停在图表扇区上时，会显示该节点的简要信息（类型、深度、体积、效应、效应密度等）。
        *   **点击 (Click)**: 点击图表中的一个扇区（节点），会在下方的“节点详情区域”显示该节点的详细信息。
*   **系统摘要与节点详情容器**:
    *   **系统摘要 (`summary-stats`)**:
        *   **功能**: 显示当前生成系统的一些关键统计数据，如总节点数、叶节点总体积/总效应（与初始值的对比）、系统生成耗时以及当前时间步。
    *   **节点详情区域 (`node-details-output`)**:
        *   **功能**: 当用户点击可视化图表中的节点时，此处会显示被点击节点的详细信息，包括：
            *   ID
            *   标签
            *   类型 (有效/无效/根)
            *   深度
            *   体积 (科学计数法)
            *   效应 (科学计数法)
            *   效应密度
            *   其直系子节点的简要列表 (标签、类型、体积、效应)
        *   **默认**: 初始状态或未点击节点时，显示提示信息“点击图表中的节点查看详情。”

## 3. 使用方法

1.  **启动系统**: 运行相应的Python脚本 (`app.py` 或类似名称)。在终端中会显示一个本地服务器地址 (通常是 `http://127.0.0.1:8051/`)。在浏览器中打开此地址。
2.  **调整参数**: 使用控制面板中的滑块调整各项系统生成参数。每个滑块下方都有对其功能的简要描述。拖动滑块时，其当前值会实时显示在滑块下方（通过Tooltip）。
3.  **选择可视化**: 从“可视化类型”下拉菜单中选择你希望看到的图表类型和依据的属性（体积或效应）。
    *   **按体积**: 展示各部分在“数量”或“空间占比”上的分布。
    *   **按效应**: 展示各部分在“价值”、“功能贡献”或“影响力”上的分布。对比这两种视图非常有启发性。
4.  **生成系统**:
    *   点击“**重新生成**”按钮，系统将根据当前的参数设置从头构建并显示。
    *   点击“**演化系统**”按钮，系统会对当前参数进行一次小的随机扰动，然后重新构建。这可以用来模拟系统随时间或环境微小变化的动态行为。时间步会相应增加。
    *   点击“**重置演化**”按钮，可以将所有参数和时间步恢复到程序预设的初始状态。
5.  **探索图表**:
    *   **放大/聚焦**: 在旭日图或矩形树图中，通常可以点击某个扇区（代表一个父节点）来“钻取”或放大，使其子节点占据整个图表区域，从而更清晰地查看其内部结构。再次点击中心区域或父区域通常可以返回上一层。
    *   **查看节点详情**: 点击图表中的任意一个扇区（节点），其详细信息将显示在图表下方的“节点详情区域”。这包括该节点自身的属性以及其直接子节点的列表。

## 4. 核心算法概念

系统基于以下核心概念构建：

*   **递归生成**: 系统从一个根节点开始，在每一层，节点根据设定的规则分裂为“有效”和“无效”两个子节点。此过程递归进行，直到达到设定的“最大深度”。
*   **参数化比例与权重**:
    *   **体积比例 (`p_eff_base`, `eff_vol_conc_factor`, `ineff_vol_spread_factor`)**: 控制“有效”和“无效”子节点分别继承其父节点“体积”（或数量）的百分比。这些比例可以随深度和父节点类型（有效/无效分支）动态调整。
    *   **效应权重 (`w_eff_base`, `eff_effect_conc_factor`, `ineff_effect_damp_factor`)**: 控制“有效”和“无效”子节点分别贡献其父节点“效应”（或价值）的百分比。这些权重同样可以动态调整。
*   **多重分形特性**: 由于比例和权重可以根据节点的上下文（如深度、父类型）而变化，系统展现出多重分形的特征——即不同部分的标度行为是不同的，而非单一分形维数所能描述。
*   **随机性**: “随机性因子”为比例和权重的计算引入了一定的随机扰动，使得每次生成的系统即使参数相同也可能略有差异，增加了模型的真实感。

## 5. 技术实现

*   **后端/逻辑**: Python
*   **Web框架**: Dash (by Plotly)
*   **可视化库**: Plotly
*   **数据处理**: NumPy (少量用于辅助计算)

## 6. 注意事项与已知限制

*   **性能**: 当“最大深度”设置得较高（例如大于4或5）时，生成的节点总数会呈指数级增长 (`2^depth`)。这可能导致数据生成时间变长，浏览器渲染图表变慢，甚至卡顿。请谨慎设置较高的深度。
*   **参数敏感性**: 某些参数组合可能会产生极端或不直观的系统结构。鼓励用户探索不同的参数设置，观察其对系统行为的影响。
*   **演化模型**: 当前的“演化系统”功能是对参数进行简单的随机扰动。它主要用于演示系统对参数漂移的响应，而非模拟复杂的生物进化或优化过程。
*   **`clickData` 结构**: Plotly不同图表类型（旭日图、矩形树图）的 `clickData` 事件对象结构可能略有差异。当前代码已尝试做基本适配，但特定情况下的点击数据解析可能需要进一步调整。
*   **存储限制**: 节点数据通过 `dcc.Store` 在客户端的JSON字符串形式传递。对于非常大的系统（极高深度），这可能会达到浏览器或Dash组件的存储/传输限制。

## 7. 未来展望

*   **参数配置的保存/加载**：允许用户保存和分享他们发现的有趣参数组合。
*   **更高级的演化模型**：引入适应度函数或用户定义的演化规则。
*   **撤销/重做功能**：允许用户撤销参数更改或演化步骤。
*   **更丰富的节点属性和交互**：例如，允许用户自定义节点颜色、标签，或在节点上附加更多元数据。
*   **集成真实数据分析**：提供接口或工具，以便将此框架应用于分析实际的分层数据集。
